<div class="packs-display" id="collection-display" style="visibility: hidden" data-unwrap-cart-target="collectionUnwrapped">
  <div class="d-flex justify-content-between">
    <div class="d-flex">
      <i class="fas fa-compact-disc cart-icon-adjust"></i>
      <div class="d-flex flex-column">
        <h3 class="cart-sfx-packs-title"> <strong>COLLECTION TEMP</strong> </h3>
        <h5>SUB-TOTAL <%= humanized_money_with_symbol @current_collections.first.price %>.00</h5>
      </div>
    </div>
    <div>
      <i class="fal fa-angle-up" data-action="click->unwrap-cart#wrap" id="collection-arrow"></i>
    </div>
  </div>
  <hr>

  <% if !@current_collections.empty? %>
    <% @current_collections.each do |collection| %>
      <div class="container" data-controller="collection-name">
        <% if !collection.title.nil? %>
          <p data-collection-name-target="collectionName">Your collection <span style="color: #69aa97; font-style: italic" data-action="click->collection-name#name" id="collection-name"><%= collection.title %></span></p>
        <% else %>
          <div data-collection-name-target="collectionNoName">
          <p>Your collection <span style="color: #69aa97; font-style: italic" data-action="click->collection-name#name" id="collection-no-name">chose a name</span></p>
          <div class="d-flex">
            <p>Your collection</p>
            <form action="#">
              <input type="text" id="collection-name">
            </form>
          </div>
          </div>
        <% end %>
      </div>
      <ul class="container">
      <% collection.tracks.each do |track_id| %>
        <% track = SingleTrack.find(track_id) %>
        <li class="border-cart">
          <div class="wrapper">
            <div class="d-flex justify-content-start elements-position">
              <span class="icon-adjust-cart"><%= sanitize @icons[track.category.to_sym] %></span>
              <span class="title-font pad-top max-width-cart"><%= track.title %></span>
              <span class="info-icon max-width-cart-icon" id="trackInfoBtn" data-trackId="<%= track.id %>"><i class="fas fa-info-circle"></i></span>
            </div>
            <div class="d-flex wave-section elements-position">
              <% if current_page?(controller: 'carts', action: 'cart') %>
                <div class="wave wave-cart" id="id<%= track.id %>" data-link="<%= track.preview_link %>">
                  <div id="loading_flag<%= track.id %>" class="loading-countdown"></div>
                </div>
              <% else %>
                <div class="wave wave-index" id="id<%= track.id %>" data-link="<%= track.preview_link %>">
                  <div id="loading_flag<%= track.id %>" class="loading-countdown"></div>
                </div>
              <% end %>
              <p class="info-font pad-top" id="trackDurationid<%= track.id %>"></p>
              <i class="far fa-play-circle pad-top play-icon-margin cursor" id="playid<%= track.id %>"></i>
              <i class="far fa-pause-circle pad-top play-icon-margin cursor" id="stopid<%= track.id %>" style="display: none"></i>
            </div>
            <div class="d-flex justify-content-between wave-section elements-position">
              <span class="info-font pad-top">
              <% if humanized_money_with_symbol(track.price).include?(".") %>
                <%= humanized_money_with_symbol(track.price) %>
              <% else %>
                <%= humanized_money_with_symbol(track.price) %>.00
              <% end %>
              </span>
              <span class="info-font points" id="comingSoonBtn"><%= track.points%></span>
            </div>
            <div class="d-flex justify-content-center purchase-section">
              <%= link_to remove_collection_from_cart_path(track: track, collection: @current_collections.first), method: :post do %>
                <i class="far fa-layer-minus pad-top purchase-icons icon-click-hover" id=""></i>
              <% end %>
            </div>
            <!-- The Track Info Modal -->
            <div id="trackInfo" class="track-info-modal" data-modalTrackId="<%= track.id %>">
              <!-- Modal content -->
              <div id="trackContentInfo" class="track-info-modal-content" data-modalTrackContentId="<%= track.id %>">
                <p><u>Title:</u> <span class="modal-orange-text" ><%= track.title %></span></p>
                <p><u>Category:</u> <span class="modal-orange-text" ><%= track.category.capitalize %></span></p>
                <p><u>Size:</u> <span class="modal-orange-text" ><%= track.size.to_i > 1_000_000 ? "#{track.size.to_i / 1_000_000} MB" : "#{track.size.to_i / 1_000} KB" %></span></p>
                <p><u>Duration:</u> <span class="modal-orange-text" id="trackDurationModalid<%= track.id %>"></span></p>
                <% if !track.sfx_pack_id.nil? %>
                  <p><u>Sound Effect Pack:</u> <span class="modal-orange-text" ><%= SfxPack.find(track.sfx_pack_id).title %></span></p>
                <% end %>
                <p><u>Bitrate:</u> <span class="modal-orange-text" ><%= track.bitrate %> bits</span></p>
                <p><u>Sample rate:</u> <span class="modal-orange-text" ><%= (track.sample_rate.to_i / 1_000) %> kHz</span></p>
              </div>
            </div>
          </div>
        </li>
      <% end %>
      </ul>

    <% end %>
  <% end %>
  <hr>
  <div class="d-flex justify-content-end">
    <div class="d-flex sub-total">
      <div>SUB-TOTAL</div>
      <div><%= humanized_money_with_symbol @current_collections.first.price %>.00</div>
    </div>
  </div>
</div>

<div class="packs-display packs-display-closed d-none" id="wrapped-collection-display" data-unwrap-cart-target="collectionWrapped">
  <div class="d-flex justify-content-between">
    <div class="d-flex">
      <i class="fas fa-compact-disc cart-icon-adjust"></i>
      <div class="d-flex flex-column">
        <h3 class="cart-sfx-packs-title"> <strong>COLLECTION TEMP</strong> </h3>
        <h5>SUB-TOTAL <%= humanized_money_with_symbol @current_collections.first.price %>.00</h5>
      </div>
    </div>
    <div>
      <i class="fal fa-angle-down" data-action="click->unwrap-cart#wrap" id="collection-arrow"></i>
    </div>
  </div>
</div>